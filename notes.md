==testing==

I initially started testing by simply doing open crawls across this web. This strategy was good for identifying runtime errors and unhandled network stack failure cases (http and tcp/ip can fail in a myriad of ways), but I continued to have a couple serious unresolved bugs. The most significant was that the crawler would eventually, maybe after 30 minutes, maybe after 18 hours, begin to slow down and eventually stop. I initially tried to resolve this problem with robust logging. I even built a custom application that allowed me to graph over time the logs across multiple crawls. I also wrote comprehensive unit tests. These were invaluable and identified numerous errors, but the halting bug still persisted.

I racked my brain over how to solve this problem. The core challenge is that a crawl does not have a deterministic output. This stands to reason; the internet is constantly changing. I contemplated writing a program that would generate a graph of interconnected html pages that I could host locally but worried I'd struggle to test it's accuracy. And then I would be left wondering if the bugs were in my crawler or my testing software.

I stumbled upon a site called books.toscrape.com and knew I had my answer. books.toscrape.com is a relatively small site (~1200 html pages) that is specifically designed testing web crawlers. I downloaded a copy of the site locally using `wget -mkEpnp http://books.toscrape.com` and would spin up a static file server for the purposes of my tests. The first thing I wanted to verify is that my crawler actually found all of the links on the test website. The only problem: I didn't have a comprehensive list of links that exist on books.toscrape.com. I ended up writing a very simple program that traversed my file system and identified links using a very permissiev regex. Validating my crawler after this point was a simple, iterative process: run both programs, diff the outputted set of links, correct differences, and repeat. This technique was instrumental for the completion of this project.
